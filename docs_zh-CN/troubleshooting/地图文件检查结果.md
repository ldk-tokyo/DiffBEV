# nuScenes 地图文件检查结果

## 检查结果

### ✅ 已存在的内容

1. **maps 目录**: `/media/ldk950413/data0/nuScenes/maps/` ✓
   - 包含 4 个 PNG 图片文件（地图图片）
   - 这些是基础地图图片

2. **map.json 元数据**: `/media/ldk950413/data0/nuScenes/v1.0-trainval/map.json` ✓
   - 包含地图的元数据信息

### ❌ 缺失的内容

**maps/expansion/ 目录及其中的 JSON 文件**:

脚本需要以下文件，但当前不存在：
- `/media/ldk950413/data0/nuScenes/maps/expansion/boston-seaport.json`
- `/media/ldk950413/data0/nuScenes/maps/expansion/singapore-onenorth.json`
- `/media/ldk950413/data0/nuScenes/maps/expansion/singapore-queenstown.json`
- `/media/ldk950413/data0/nuScenes/maps/expansion/singapore-hollandvillage.json`

## 解决方案

### 下载地图扩展文件

这些 JSON 文件包含详细的地图几何数据（多边形、道路等），需要从 nuScenes 官网单独下载。

1. **下载文件**:
   - 文件名: `v1.0-trainval_map_expansion.tgz`
   - 下载地址: https://www.nuscenes.org/download
   - 文件大小: 约 1.8 GB

2. **解压到正确位置**:
   ```bash
   cd /media/ldk950413/data0/nuScenes
   tar -xzf v1.0-trainval_map_expansion.tgz
   ```

3. **验证解压结果**:
   ```bash
   ls -la /media/ldk950413/data0/nuScenes/maps/expansion/
   # 应该看到 4 个 .json 文件
   ```

## 当前目录结构

```
/media/ldk950413/data0/nuScenes/
├── maps/
│   ├── 36092f0b03a857c6a3403e25b4b7aab3.png  ✓ (地图图片)
│   ├── 37819e65e09e5547b8a3ceaefba56bb2.png  ✓ (地图图片)
│   ├── 53992ee3023e5494b90c316c183be829.png  ✓ (地图图片)
│   ├── 93406b464a165eaba6d9de76ca09f5da.png  ✓ (地图图片)
│   └── expansion/                              ✗ (缺失，需要创建)
│       ├── boston-seaport.json                ✗
│       ├── singapore-onenorth.json            ✗
│       ├── singapore-queenstown.json          ✗
│       └── singapore-hollandvillage.json      ✗
├── v1.0-trainval/
│   └── map.json                               ✓ (地图元数据)
└── ...
```

## 快速检查命令

运行以下命令检查地图文件状态：

```bash
bash /media/ldk950413/data0/DiffBEV/快速检查.sh
```

或者手动检查：

```bash
# 检查 expansion 目录
if [ -d "/media/ldk950413/data0/nuScenes/maps/expansion" ]; then
    echo "✓ expansion 目录存在"
    ls -lh /media/ldk950413/data0/nuScenes/maps/expansion/*.json 2>/dev/null | wc -l
    echo "个 JSON 文件"
else
    echo "✗ expansion 目录不存在"
    echo "需要下载: v1.0-trainval_map_expansion.tgz"
fi
```

## 下一步

1. **下载地图扩展文件**: `v1.0-trainval_map_expansion.tgz`
2. **解压到**: `/media/ldk950413/data0/nuScenes/`
3. **验证**: 确认 `maps/expansion/` 目录包含 4 个 JSON 文件
4. **运行数据准备**: `bash prepare_nuscenes_bev_data.sh`
